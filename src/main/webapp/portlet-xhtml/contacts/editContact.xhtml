<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">
    
    
    <a4j:region>
    
        <!-- AJAX SPINNER FOR THIS REGION -->
        <div style="float: right;">
            <a4j:status id="popupStatus">
                <f:facet name="start">
                    <h:graphicImage value="#{resource['/images/ajax_loader.gif']}" alt="ai" width="22px" height="22px"/>
                </f:facet>
            </a4j:status>
        </div>
        
        <h3>
            <h:outputText rendered="#{not empty contactController.contact.displayedName}" value="#{contactController.contact.displayedName}" />
            <h:outputText rendered="#{empty contactController.contact.displayedName}" value="#{contactController.contact.name} #{contactController.contact.middleName} #{contactController.contact.surname}" />                               
        </h3>    
             
        <br />
        
        <rich:tabPanel switchType="client" style="width: 650px;">
            <rich:tab header="#{text.BasicInfo}">
                <a4j:region>
                
                    <ui:include src="contactForm.xhtml" />
                    
                    <div class="buttonField">   
                        <a4j:commandButton title="#{text.Save}" value="#{text.Save}"
                            actionListener="#{contactController.editContact}" 
                            action="#{popupManagerContactsBean.setPopup('contactDetail', text.ContactDetail)}"
                            render="contactsView groupsView dynamic-popup-content dynamic-popup-title"                       
                            oncomplete="#{rich:component('dynamic-popup')}.hide(); #{rich:component('dynamic-popup')}.show(); return false;" />
                    </div> 
                </a4j:region>
            </rich:tab>    
            
            <rich:tab header="#{text.Emails}">
                <a4j:region>
                    <ui:include src="emailForm.xhtml" />                    
                </a4j:region>  
            </rich:tab>
            
            <rich:tab header="#{text.TelephoneNumbers}">
                <a4j:region>
                    <ui:include src="telephoneForm.xhtml" />                    
                </a4j:region>  
            </rich:tab>
            
            <rich:tab header="#{text.Addresses}">
                <a4j:region>
                    <ui:include src="addressForm.xhtml" />                    
                </a4j:region>  
            </rich:tab>
            
            <rich:tab header="#{text.URLs}">
                <a4j:region>
                    <ui:include src="urlForm.xhtml" />                    
                </a4j:region>  
            </rich:tab>
            
        </rich:tabPanel>
        
        <small>* #{text.UseMainSave}</small>
        
    </a4j:region>
    
 
</ui:composition>
